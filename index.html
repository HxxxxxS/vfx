<!DOCTYPE html>
<html>
  <head>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="/assets/jquery.js"></script>
    <style>
      body{
        background:black;
        cursor: none !important;
      }
      *{
        cursor: none !important;
      }
      @-moz-keyframes fade {
        0%{ opacity: 0.4 }
        10% { opacity: 0.23 }
        25% { opacity: 0.5 }
        50% { opacity: 0.15 }
        74% { opacity: 0.4 }
        90% { opacity: 0.56 }
      }
      #player1,
      #player2{
        position:absolute;
        left:0;
        top:0;
      }
      #player1{
      }
      #player2{
        opacity: 0.5;
        -moz-animation: fade 20s ease infinite;
      }
    </style>
  </head>
  <body>
    <!-- https://www.youtube.com/watch?v=6zoJavBcU5o -->
    <div id="player1"></div>
    <div id="player2"></div>

    <script>
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      var player1;
      var player2;

      function onYouTubeIframeAPIReady() {
        player1 = new YT.Player('player1', {
          height: window.innerHeight,
          width: window.innerWidth,
          playerVars: 
          {
            listType:'playlist',
            list: 'PLTZu_i5Q06qBtm3XlJZm_WuViWJDF1l9h',
            controls: 0,
            cc_load_policy: 0,
            iv_load_policy: 0,
            modestbranding: 1,
            showinfo: 0,
            disablekb: 1,
            loop: 1
          },
          events: {
            'onReady': onPlayerReady1,
            'onStateChange': onPlayerStateChange
          }
        });
        player2 = new YT.Player('player2', {
          height: window.innerHeight,
          width: window.innerWidth,
          playerVars: 
          {
            listType:'playlist',
            list: 'PLTZu_i5Q06qCtR4GwHMZIMQq-F1E4YBT9',
            controls: 0,
            cc_load_policy: 0,
            iv_load_policy: 0,
            modestbranding: 1,
            showinfo: 0,
            disablekb: 1,
            loop: 1,
            shuffle: 1
          },
          events: {
            'onReady': onPlayerReady2,
            'onStateChange': onPlayerStateChange
          }
        });
      }


      function onPlayerReady1(event) {
        event.target.playVideo();
      }
      function onPlayerReady2(event) {
        event.target.playVideo();
        event.target.setShuffle(true);
        //event.target.setPlaybackRate([0.5,1][Math.floor((Math.random() * 2))]);
      }

      function onPlayerStateChange(event) {
        event.target.mute();
        event.target.setPlaybackQuality('large');
      }

      function stopVideo(player) {
        player.stopVideo();
      }

      function stop() {
        player1.stopVideo();
        player2.stopVideo();
      }

      function next(i)
      {
        if(i == 1){
          player1.nextVideo();
        }else if(i == 2){
          player2.playVideoAt(Math.floor(Math.random() * player2.getPlaylist().length));
        }
      }

      $(document).on('keydown', function(e){
        var keyCode = e.keyCode || e.which;
        console.log(e);
        var player = (e.shiftKey || e.ctrlKey ? player1 : player2);

        if(keyCode == 78){ // N
          next((e.shiftKey || e.ctrlKey ? 1 : 2));
        }

        if(keyCode == 75){ // K
          if(player.getPlayerState() == 1)
            player.pauseVideo();
          else
            player.playVideo()
        }

        if(keyCode == 32){ // Space
          var skipTo = Math.floor(Math.random() * player.getDuration());
          player.seekTo(skipTo);
        }
      });
    </script>
  </body>
</html>